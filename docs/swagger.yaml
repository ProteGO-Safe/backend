openapi: "3.0.0"
info:
  description: ""
  version: "1.0.0"
  title: "Anna Project backend"

components:
  schemas:

    ResponseOkGetStatus:
      properties:
        status:
          example: "orange"
          type: string
        beacon_ids:
          type: array
          items:
            type: object
            properties:
              date:
                description: "Date in format YYYYmmddhh"
                type: string
                example: "2020032810"
              beacon_id:
                description: "Single beacon id"
                type: string
                format: uuid
                example: "ce83fef9-470c-430f-b4c3-743c26373ab9"

    ResponseOkCheckVersion:
      properties:
        upgrade_required:
          example: false
          type: boolean
        upgrade_url:
          type: string
          format: uri

paths:
  /get_status/:
    post:
      tags:
        - "get_status"
      summary: "Get user status."
      description: ""
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - user_id
                - platform
                - os_version
                - device_name
                - app_version
                - lang
              properties:
                registration_id:
                  type: string
                  description: "ID of a user"
                  example: "70286984-5f0d-4bf1-9d3e-daea2e4bfc62"
                platform:
                  type: string
                  description: "Name of the plafform"
                  example: "android"
                os_version:
                  type: string
                  description: "Phone's operating system version"
                  example: "12.0"
                device_name:
                  type: string
                  description: "Name of the device"
                  example: "Jan's iPhone"
                app_version:
                  type: string
                  description: "Version of the Anna app"
                  example: "1.0.0"
                lang:
                  type: string
                  description: "Phone's language"
                  example: "PL"
      responses:
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseOkGetStatus"

  /check_version/:
    post:
      summary: "Check app status."
      description: ""
      responses:
        200:
          description: "OK"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResponseOkCheckVersion"
